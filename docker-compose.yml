version: "3.7"
services:
  caddy:
    image: caddy:2.7.6-alpine
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - caddy:/data
      - files:/var/www/html:ro
    ports:
      - 80:80
      - 443:443
    restart: unless-stopped
  nextcloud:
    image: nextcloud:stable-fpm-alpine
    volumes:
      - files:/var/www/html:delegated
    restart: unless-stopped
volumes:
  files:
  caddy: